<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Kapitel 9 Kontrollstrukturen | Handout für R Grundkurs</title>
  <meta name="description" content="Kapitel 9 Kontrollstrukturen | Handout für R Grundkurs" />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="Kapitel 9 Kontrollstrukturen | Handout für R Grundkurs" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Kapitel 9 Kontrollstrukturen | Handout für R Grundkurs" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="tidyverse.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/d3-3.3.8/d3.min.js"></script>
<script src="libs/dagre-0.4.0/dagre-d3.min.js"></script>
<link href="libs/mermaid-0.3.0/dist/mermaid.css" rel="stylesheet" />
<script src="libs/mermaid-0.3.0/dist/mermaid.slim.min.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/chromatography-0.1/chromatography.js"></script>
<script src="libs/DiagrammeR-binding-1.0.9/DiagrammeR.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Handout R Kurs</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Vorwort</a></li>
<li class="chapter" data-level="" data-path="hinweise-zur-verwendung-des-handouts.html"><a href="hinweise-zur-verwendung-des-handouts.html"><i class="fa fa-check"></i>Hinweise zur Verwendung des Handouts</a></li>
<li class="chapter" data-level="1" data-path="einführung.html"><a href="einführung.html"><i class="fa fa-check"></i><b>1</b> Einführung</a>
<ul>
<li class="chapter" data-level="1.1" data-path="einführung.html"><a href="einführung.html#was-ist-r-und-warum-sollte-man-r-lernen"><i class="fa fa-check"></i><b>1.1</b> Was ist R und warum sollte man R lernen?</a></li>
<li class="chapter" data-level="1.2" data-path="einführung.html"><a href="einführung.html#installation"><i class="fa fa-check"></i><b>1.2</b> Installation</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="oberfläche.html"><a href="oberfläche.html"><i class="fa fa-check"></i><b>2</b> Oberfläche</a>
<ul>
<li class="chapter" data-level="2.1" data-path="oberfläche.html"><a href="oberfläche.html#r-gui"><i class="fa fa-check"></i><b>2.1</b> R GUI</a></li>
<li class="chapter" data-level="2.2" data-path="oberfläche.html"><a href="oberfläche.html#rstudio"><i class="fa fa-check"></i><b>2.2</b> RStudio</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="oberfläche.html"><a href="oberfläche.html#console"><i class="fa fa-check"></i><b>2.2.1</b> Console</a></li>
<li class="chapter" data-level="2.2.2" data-path="oberfläche.html"><a href="oberfläche.html#script-editor"><i class="fa fa-check"></i><b>2.2.2</b> Script Editor</a></li>
<li class="chapter" data-level="2.2.3" data-path="oberfläche.html"><a href="oberfläche.html#file-editor-und-environment"><i class="fa fa-check"></i><b>2.2.3</b> File-Editor und Environment</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="oberfläche.html"><a href="oberfläche.html#prüfe-dich-selbst"><i class="fa fa-check"></i><b>2.3</b> Prüfe dich selbst</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html"><i class="fa fa-check"></i><b>3</b> Atomare Datentypen</a>
<ul>
<li class="chapter" data-level="3.1" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#arithmetische-grundoperationen-und-basisfunktionen"><i class="fa fa-check"></i><b>3.1</b> Arithmetische Grundoperationen und Basisfunktionen</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#funktionsaufrufe"><i class="fa fa-check"></i><b>3.1.1</b> Funktionsaufrufe</a></li>
<li class="chapter" data-level="3.1.2" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#objekte-funktionen-und-referenzen"><i class="fa fa-check"></i><b>3.1.2</b> Objekte, Funktionen und Referenzen</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#erzeugung-von-referenzierbaren-objekten"><i class="fa fa-check"></i><b>3.2</b> Erzeugung von referenzierbaren Objekten</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#anmerkung-namen"><i class="fa fa-check"></i><b>3.2.1</b> Anmerkung Namen</a></li>
<li class="chapter" data-level="3.2.2" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#rechnungen-mit-werten-von-objekten"><i class="fa fa-check"></i><b>3.2.2</b> Rechnungen mit Werten von Objekten</a></li>
<li class="chapter" data-level="3.2.3" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#namen-überschreiben"><i class="fa fa-check"></i><b>3.2.3</b> Namen überschreiben</a></li>
<li class="chapter" data-level="3.2.4" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#objekte-löschen"><i class="fa fa-check"></i><b>3.2.4</b> Objekte löschen</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#logische-werte-und-operationen"><i class="fa fa-check"></i><b>3.3</b> Logische Werte und Operationen</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#der-logische-wert-na"><i class="fa fa-check"></i><b>3.3.1</b> Der “logische” Wert NA</a></li>
<li class="chapter" data-level="3.3.2" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#vergleichs-operationen"><i class="fa fa-check"></i><b>3.3.2</b> Vergleichs-Operationen</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#zeichenketten-character-strings"><i class="fa fa-check"></i><b>3.4</b> Zeichenketten (character strings)</a></li>
<li class="chapter" data-level="3.5" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#klasse-eines-datenobjektes"><i class="fa fa-check"></i><b>3.5</b> Klasse eines Datenobjektes</a></li>
<li class="chapter" data-level="3.6" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#spezielle-werte"><i class="fa fa-check"></i><b>3.6</b> Spezielle Werte</a></li>
<li class="chapter" data-level="3.7" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#prüfe-dich-selbst-1"><i class="fa fa-check"></i><b>3.7</b> Prüfe dich selbst</a></li>
<li class="chapter" data-level="3.8" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#literaturverweise"><i class="fa fa-check"></i><b>3.8</b> Literaturverweise</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html"><i class="fa fa-check"></i><b>4</b> Strukturierte Datentypen</a>
<ul>
<li class="chapter" data-level="4.1" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#vektoren"><i class="fa fa-check"></i><b>4.1</b> Vektoren</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#abfragen-von-werten-durch-subsetting-von-vektoren"><i class="fa fa-check"></i><b>4.1.1</b> Abfragen von Werten durch Subsetting von Vektoren</a></li>
<li class="chapter" data-level="4.1.2" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#vektorisierte-operationen"><i class="fa fa-check"></i><b>4.1.2</b> Vektorisierte Operationen</a></li>
<li class="chapter" data-level="4.1.3" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#operationen-auf-vektoren"><i class="fa fa-check"></i><b>4.1.3</b> Operationen auf Vektoren</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#matrizen"><i class="fa fa-check"></i><b>4.2</b> Matrizen</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#benennung-von-spalten"><i class="fa fa-check"></i><b>4.2.1</b> Benennung von Spalten</a></li>
<li class="chapter" data-level="4.2.2" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#erzeugung-von-matrizen-aus-vektoren"><i class="fa fa-check"></i><b>4.2.2</b> Erzeugung von Matrizen aus Vektoren</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#listen"><i class="fa fa-check"></i><b>4.3</b> Listen</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#indizierung-von-listen"><i class="fa fa-check"></i><b>4.3.1</b> Indizierung von Listen</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#data-frames"><i class="fa fa-check"></i><b>4.4</b> Data Frames</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#indizierung-von-datentabellen"><i class="fa fa-check"></i><b>4.4.1</b> Indizierung von Datentabellen</a></li>
<li class="chapter" data-level="4.4.2" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#aufname-weiterer-variablenspalten"><i class="fa fa-check"></i><b>4.4.2</b> Aufname weiterer Variablen/Spalten</a></li>
<li class="chapter" data-level="4.4.3" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#operationen-auf-datentabellen"><i class="fa fa-check"></i><b>4.4.3</b> Operationen auf Datentabellen</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#prüfe-dich-selbst-2"><i class="fa fa-check"></i><b>4.5</b> Prüfe dich selbst</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="funktionen.html"><a href="funktionen.html"><i class="fa fa-check"></i><b>5</b> Funktionen</a>
<ul>
<li class="chapter" data-level="5.1" data-path="funktionen.html"><a href="funktionen.html#eigenschaften"><i class="fa fa-check"></i><b>5.1</b> Eigenschaften</a></li>
<li class="chapter" data-level="5.2" data-path="funktionen.html"><a href="funktionen.html#aufbau"><i class="fa fa-check"></i><b>5.2</b> Aufbau</a></li>
<li class="chapter" data-level="5.3" data-path="funktionen.html"><a href="funktionen.html#verschachtelungen"><i class="fa fa-check"></i><b>5.3</b> Verschachtelungen</a></li>
<li class="chapter" data-level="5.4" data-path="funktionen.html"><a href="funktionen.html#pipes"><i class="fa fa-check"></i><b>5.4</b> Pipes</a></li>
<li class="chapter" data-level="5.5" data-path="funktionen.html"><a href="funktionen.html#default-werte"><i class="fa fa-check"></i><b>5.5</b> Default Werte</a></li>
<li class="chapter" data-level="5.6" data-path="funktionen.html"><a href="funktionen.html#help-fenster"><i class="fa fa-check"></i><b>5.6</b> Help Fenster</a></li>
<li class="chapter" data-level="5.7" data-path="funktionen.html"><a href="funktionen.html#prüfe-dich-selbst-3"><i class="fa fa-check"></i><b>5.7</b> Prüfe dich selbst</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>6</b> Packages</a>
<ul>
<li class="chapter" data-level="6.1" data-path="packages.html"><a href="packages.html#packages-installieren-und-laden"><i class="fa fa-check"></i><b>6.1</b> Packages installieren und Laden</a></li>
<li class="chapter" data-level="6.2" data-path="packages.html"><a href="packages.html#needs"><i class="fa fa-check"></i><b>6.2</b> needs()</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="dateimanagement.html"><a href="dateimanagement.html"><i class="fa fa-check"></i><b>7</b> Dateimanagement</a>
<ul>
<li class="chapter" data-level="7.1" data-path="dateimanagement.html"><a href="dateimanagement.html#absolute-und-relative-dateipfade-exkurs"><i class="fa fa-check"></i><b>7.1</b> Absolute und relative Dateipfade (Exkurs)</a></li>
<li class="chapter" data-level="7.2" data-path="dateimanagement.html"><a href="dateimanagement.html#r-projects"><i class="fa fa-check"></i><b>7.2</b> R Projects</a></li>
<li class="chapter" data-level="7.3" data-path="dateimanagement.html"><a href="dateimanagement.html#dateien-einlesen"><i class="fa fa-check"></i><b>7.3</b> Dateien einlesen</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="dateimanagement.html"><a href="dateimanagement.html#r-interne-dateien"><i class="fa fa-check"></i><b>7.3.1</b> R-interne Dateien</a></li>
<li class="chapter" data-level="7.3.2" data-path="dateimanagement.html"><a href="dateimanagement.html#r-externe-dateien"><i class="fa fa-check"></i><b>7.3.2</b> R-externe Dateien</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>8</b> Tidyverse</a>
<ul>
<li class="chapter" data-level="8.1" data-path="tidyverse.html"><a href="tidyverse.html#das-tidyverse"><i class="fa fa-check"></i><b>8.1</b> Das “Tidyverse”</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="tidyverse.html"><a href="tidyverse.html#tidyverse-laden"><i class="fa fa-check"></i><b>8.1.1</b> Tidyverse laden</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="tidyverse.html"><a href="tidyverse.html#dplyr"><i class="fa fa-check"></i><b>8.2</b> <code>dplyr::</code></a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="tidyverse.html"><a href="tidyverse.html#daten-verfügbar-machen"><i class="fa fa-check"></i><b>8.2.1</b> Daten verfügbar machen</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="tidyverse.html"><a href="tidyverse.html#variablen-manipulieren"><i class="fa fa-check"></i><b>8.3</b> Variablen Manipulieren</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="tidyverse.html"><a href="tidyverse.html#neue-variablen-erstellen"><i class="fa fa-check"></i><b>8.3.1</b> Neue Variablen erstellen</a></li>
<li class="chapter" data-level="8.3.2" data-path="tidyverse.html"><a href="tidyverse.html#variablen-umbennen"><i class="fa fa-check"></i><b>8.3.2</b> Variablen umbennen</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="tidyverse.html"><a href="tidyverse.html#fälle-manipulieren"><i class="fa fa-check"></i><b>8.4</b> Fälle Manipulieren</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="tidyverse.html"><a href="tidyverse.html#fälle-gruppieren"><i class="fa fa-check"></i><b>8.4.1</b> Fälle Gruppieren</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="tidyverse.html"><a href="tidyverse.html#prüfe-dich-selbst-4"><i class="fa fa-check"></i><b>8.5</b> Prüfe dich selbst</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="kontrollstrukturen.html"><a href="kontrollstrukturen.html"><i class="fa fa-check"></i><b>9</b> Kontrollstrukturen</a>
<ul>
<li class="chapter" data-level="9.1" data-path="kontrollstrukturen.html"><a href="kontrollstrukturen.html#prinzipien-der-programmierung"><i class="fa fa-check"></i><b>9.1</b> Prinzipien der Programmierung</a></li>
<li class="chapter" data-level="9.2" data-path="kontrollstrukturen.html"><a href="kontrollstrukturen.html#funktionen-selber-schreiben"><i class="fa fa-check"></i><b>9.2</b> Funktionen selber schreiben</a></li>
<li class="chapter" data-level="9.3" data-path="kontrollstrukturen.html"><a href="kontrollstrukturen.html#kontrollstrukturen-1"><i class="fa fa-check"></i><b>9.3</b> Kontrollstrukturen</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="kontrollstrukturen.html"><a href="kontrollstrukturen.html#vektorisierte-fallunterscheidungen"><i class="fa fa-check"></i><b>9.3.1</b> Vektorisierte Fallunterscheidungen</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="kontrollstrukturen.html"><a href="kontrollstrukturen.html#schleifen"><i class="fa fa-check"></i><b>9.4</b> Schleifen</a></li>
<li class="chapter" data-level="9.5" data-path="kontrollstrukturen.html"><a href="kontrollstrukturen.html#vektorisiertes-programmieren"><i class="fa fa-check"></i><b>9.5</b> Vektorisiertes Programmieren</a></li>
<li class="chapter" data-level="9.6" data-path="kontrollstrukturen.html"><a href="kontrollstrukturen.html#prüfe-dich-selbst-5"><i class="fa fa-check"></i><b>9.6</b> Prüfe dich selbst</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Handout für R Grundkurs</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="kontrollstrukturen" class="section level1 hasAnchor" number="9">
<h1><span class="header-section-number">Kapitel 9</span> Kontrollstrukturen<a href="kontrollstrukturen.html#kontrollstrukturen" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In diesem Kapitel sollen einige Prinzipien der Programmierung vorgestellte werden und gezeigt werden, wie sich diese in R umsetzen lassen. R bietet dabei eine Vielzahl an Möglichkeiten, von welchen einige besprochen werden sollen.</p>
<div id="prinzipien-der-programmierung" class="section level2 hasAnchor" number="9.1">
<h2><span class="header-section-number">9.1</span> Prinzipien der Programmierung<a href="kontrollstrukturen.html#prinzipien-der-programmierung" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R setzt in großen Teilen die Ideen der funktionalen Programmierung um. Das bedeutet für uns vor allem erst mal, dass ein Großteil der Problemlösung über Funktionen erfolgt. Folgende Prinzipien gilt es zu verinnerlichen, wenn man diese Eigenschaft effizient ausnutzen will:</p>
<ol style="list-style-type: decimal">
<li><p>DRY-Prinzip: “Don’t repeat yourself”. Treten wiederholt gleiche oder
ähnliche Code-Elemente auf, so sollte man diese als Funktion zusammenfassen.</p></li>
<li><p>“Divide and Conquer”- Prinzip: Oft ist es besser, das Problem oder die Analyse
in verschieden Teilprobleme aufzuteilen und für diese entsprechende Funktionen zu schreiben.</p></li>
<li><p>“Abstraktion”/Blackbox-Prinzip: Anstelle explizit viele Codezeilen im
Hauptcode zu listen, welche letztlich gemeinsam eine bestimmte Funktion
erfüllen, ist es besser, diese Komplexität in einer Funktion zu “verstecken”.
Black Box: Entscheidend ist <em>was</em> die Funktion macht und nicht <em>wie</em> sie es
macht.</p></li>
</ol>
<p>Welche Möglichkeiten es gibt, diesen Prinzipien nachzukommen, wollen wir uns jetzt anschauen.</p>
</div>
<div id="funktionen-selber-schreiben" class="section level2 hasAnchor" number="9.2">
<h2><span class="header-section-number">9.2</span> Funktionen selber schreiben<a href="kontrollstrukturen.html#funktionen-selber-schreiben" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Funktionen waren schon oft unser Thema. Jetzt wollen wir uns anschauen, wie man selbst eine Funktion schreiben kann. Dies geschieht im Allgemeinen über dieses generelle Schema einer Funktionszuweisung:</p>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="kontrollstrukturen.html#cb213-1" aria-hidden="true" tabindex="-1"></a>name_function <span class="ot">&lt;-</span> <span class="cf">function</span>(arg1, ...) {body}</span></code></pre></div>
<ul>
<li>Mit der Funktion <code>function()</code> können wir Funktionen erzeugen. :) Man beachte allerdings, dass nach den Klammern <code>()</code> noch etwas folgt.</li>
<li>Funktionen sind auch Objekte und können wie alle anderen Objekte auch an Namen gebunden werden.</li>
<li>Eine Funktion hat typischerweise Argumentstellen (<code>arg1, ...</code>), welche als sogenannte Funktionsparameter an den <code>body</code> weitergegeben werden.</li>
<li>Der <code>body</code> oder auch Rumpf der Funktion enthält den Code, welcher beim Funktionsaufruf ausgeführt werden soll.</li>
</ul>
<p>Eine konkrete Funktionszuweisung könnte dann so aussehen:</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="kontrollstrukturen.html#cb214-1" aria-hidden="true" tabindex="-1"></a>quadrat <span class="ot">&lt;-</span> <span class="cf">function</span> (x) {x<span class="sc">^</span><span class="dv">2</span>}</span>
<span id="cb214-2"><a href="kontrollstrukturen.html#cb214-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-3"><a href="kontrollstrukturen.html#cb214-3" aria-hidden="true" tabindex="-1"></a><span class="fu">quadrat</span>(<span class="dv">2</span>) </span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>Die erzeugte Funktion nimmt eine Zahl <code>x</code> als Parameter entgegen und berechnet das Quadrat dieser. Da im <code>body</code> nichts Abweichendes definiert ist, wird das letzte Objekt zurückgegeben, also das Ergebnis unserer Berechnung. Unser Rückgabewert entspricht also dem Ergebnis der funktion <code>x^2</code>.</p>
<p>Optional kann man eine Rückgabe innerhalb des Rumpfes der Funktion auch erzwingen. Dazu verwendet man die Funktion <code>return()</code>. Zu beachten gilt es, dass die Ausführung der Funktion beim ersten Aufruf der <code>return()</code> Funktion abbricht und folgender Code nicht mehr berücksichtigt wird.</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="kontrollstrukturen.html#cb216-1" aria-hidden="true" tabindex="-1"></a>quadrat <span class="ot">&lt;-</span> <span class="cf">function</span> (x) {</span>
<span id="cb216-2"><a href="kontrollstrukturen.html#cb216-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb216-3"><a href="kontrollstrukturen.html#cb216-3" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> x<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb216-4"><a href="kontrollstrukturen.html#cb216-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(y)</span>
<span id="cb216-5"><a href="kontrollstrukturen.html#cb216-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb216-6"><a href="kontrollstrukturen.html#cb216-6" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> y <span class="sc">+</span> <span class="dv">1</span> </span>
<span id="cb216-7"><a href="kontrollstrukturen.html#cb216-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(y)</span>
<span id="cb216-8"><a href="kontrollstrukturen.html#cb216-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb216-9"><a href="kontrollstrukturen.html#cb216-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb216-10"><a href="kontrollstrukturen.html#cb216-10" aria-hidden="true" tabindex="-1"></a><span class="fu">quadrat</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<p>Im gegebenen Beispiel wird alles nach dem ersten <code>return(y)</code> nicht mehr ausgeführt. Der Rückgabewert der Funktion entspricht dem Wert des Objektes, welches mit dem Namen <code>y</code> verknüpft ist.</p>
<p>Wie wir gerade schon gesehen haben, können wir auch innerhalb von Funktionen Objekte an Namen binden. Dabei gilt es aber zu berücksichtigen, dass wir dabei <strong>kein</strong> Objekt in unserer <em>Global Environment</em> anlegen. Die Zuweisung gilt lediglich für den jeweiligen Wirkungsbereich (Scope) der Funktion, also alles, was in den geschweiften Klammern <code>{...}</code> steht.</p>
<div class="sourceCode" id="cb218"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb218-1"><a href="kontrollstrukturen.html#cb218-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb218-2"><a href="kontrollstrukturen.html#cb218-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-3"><a href="kontrollstrukturen.html#cb218-3" aria-hidden="true" tabindex="-1"></a>quadrat <span class="ot">&lt;-</span> <span class="cf">function</span> (x) {</span>
<span id="cb218-4"><a href="kontrollstrukturen.html#cb218-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb218-5"><a href="kontrollstrukturen.html#cb218-5" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> x<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb218-6"><a href="kontrollstrukturen.html#cb218-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(x)</span>
<span id="cb218-7"><a href="kontrollstrukturen.html#cb218-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb218-8"><a href="kontrollstrukturen.html#cb218-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-9"><a href="kontrollstrukturen.html#cb218-9" aria-hidden="true" tabindex="-1"></a><span class="fu">quadrat</span>(x) </span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="kontrollstrukturen.html#cb220-1" aria-hidden="true" tabindex="-1"></a>x</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p>Wie wir hier sehen können, bleibt die globale Zuweisung für den Namen <code>x</code> erhalten, trotz der erneuten Zuweisung eines Namens <code>x</code> innerhalb der Funktion.</p>
<p><em>Anmerkung:</em></p>
<p>Um den “Fluss” eurer Funktion nach zu verfolgen, könnt ihr Nachrichten auf der Konsole im Funktionsablauf ausgeben lassen. Das ist vor allem praktisch, wenn ihr euch nicht sicher seid, welchen Werte welches Objekt zu welchem Zeitpunkt hat.</p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="kontrollstrukturen.html#cb222-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb222-2"><a href="kontrollstrukturen.html#cb222-2" aria-hidden="true" tabindex="-1"></a>quadrat <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb222-3"><a href="kontrollstrukturen.html#cb222-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;Funktion beginnt mir ihrer Arbeit, x ist: &quot;</span>, x)</span>
<span id="cb222-4"><a href="kontrollstrukturen.html#cb222-4" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> x<span class="sc">^</span><span class="dv">2</span></span>
<span id="cb222-5"><a href="kontrollstrukturen.html#cb222-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">message</span>(<span class="st">&quot;Erste Berechnung erfolgreich, x ist: &quot;</span>, x)</span>
<span id="cb222-6"><a href="kontrollstrukturen.html#cb222-6" aria-hidden="true" tabindex="-1"></a>  x</span>
<span id="cb222-7"><a href="kontrollstrukturen.html#cb222-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb222-8"><a href="kontrollstrukturen.html#cb222-8" aria-hidden="true" tabindex="-1"></a><span class="fu">quadrat</span>(x)</span></code></pre></div>
<pre><code>## Funktion beginnt mir ihrer Arbeit, x ist: 2</code></pre>
<pre><code>## Erste Berechnung erfolgreich, x ist: 4</code></pre>
<pre><code>## [1] 4</code></pre>
<p>Alternativ könnt ihr eurer Variablen <code>x</code> einen konstanten Wert zuweisen, zum Beispiel <code>x &lt;- 2</code>, und den <code>{body}</code> der Funktion Schritt für Schritt ausführen.</p>
<p>Wenn man einen sogenannten default-Wert hinterlegt, dann kann eure Funktion auch ohne eine Belegung der entsprechenden Argumentstelle aufgerufen werden:</p>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="kontrollstrukturen.html#cb226-1" aria-hidden="true" tabindex="-1"></a>quadrat <span class="ot">&lt;-</span> <span class="cf">function</span> (<span class="at">x =</span> <span class="dv">10</span>) { x<span class="sc">^</span><span class="dv">2</span> }</span>
<span id="cb226-2"><a href="kontrollstrukturen.html#cb226-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-3"><a href="kontrollstrukturen.html#cb226-3" aria-hidden="true" tabindex="-1"></a><span class="fu">quadrat</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## [1] 4</code></pre>
<div class="sourceCode" id="cb228"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb228-1"><a href="kontrollstrukturen.html#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="fu">quadrat</span>()</span></code></pre></div>
<pre><code>## [1] 100</code></pre>
<p>Defaults können sehr nützlich sein, um Komplexität zu verstecken.</p>
<p>Seit R 4.1.0 gibt es in R einen shortcut um anonyme Funktionen zu deklarieren:</p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="kontrollstrukturen.html#cb230-1" aria-hidden="true" tabindex="-1"></a>pow <span class="ot">&lt;-</span> \(x, <span class="at">y =</span> <span class="dv">2</span>) x<span class="sc">^</span>y</span>
<span id="cb230-2"><a href="kontrollstrukturen.html#cb230-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-3"><a href="kontrollstrukturen.html#cb230-3" aria-hidden="true" tabindex="-1"></a><span class="fu">pow</span>(<span class="dv">2</span>,<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [1] 8</code></pre>
<p>Statt <code>function</code> schreibt man einfach <code>\</code> und die Klammern des Rumpfes <code>{}</code> werden einfach weggelassen. Das ist vor allem dann sinnvoll, wenn man eine Funktion <em>ad hoc</em> deklarieren will, zum Beispiel als Argument einer anderen Funktion. Darauf kommen wir später noch einmal zurück. Allerdings kann diese verkürzte Schreibweise auch zur schlechteren Lesbarkeit eures Codes führen.</p>
</div>
<div id="kontrollstrukturen-1" class="section level2 hasAnchor" number="9.3">
<h2><span class="header-section-number">9.3</span> Kontrollstrukturen<a href="kontrollstrukturen.html#kontrollstrukturen-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Kontrollstrukturen dienen der Ablaufsteuerung und sind essenziell für die Konstruktion von Algorithmen:</p>
<p>Folgende Logiken können dabei implementiert werden:</p>
<ol style="list-style-type: decimal">
<li>Verzweigungen/Fallunterscheidungen:</li>
</ol>
<ul>
<li>Falls heute die Sonne scheint, geh in den Park. Falls nicht, dann lerne
für die nächste Klausur.</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li>Schleifen:</li>
</ol>
<ul>
<li><p>Solange die Sonne scheint, bleibe im Park.</p></li>
<li><p>Bestimme alle Quadratzahlen von <span class="math inline">\(1^2\)</span> bis <span class="math inline">\(100^2\)</span>.</p></li>
</ul>
<p>Ein klassische Fallunterscheidung können wir in R mit einer <code>if-else</code> Abfolge umsetzen:</p>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="kontrollstrukturen.html#cb232-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb232-2"><a href="kontrollstrukturen.html#cb232-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-3"><a href="kontrollstrukturen.html#cb232-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (x <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb232-4"><a href="kontrollstrukturen.html#cb232-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(x, <span class="st">&quot;ist positiv&quot;</span>))</span>
<span id="cb232-5"><a href="kontrollstrukturen.html#cb232-5" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb232-6"><a href="kontrollstrukturen.html#cb232-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(x, <span class="st">&quot;ist nicht-positiv&quot;</span>))</span>
<span id="cb232-7"><a href="kontrollstrukturen.html#cb232-7" aria-hidden="true" tabindex="-1"></a>  }</span></code></pre></div>
<pre><code>## [1] &quot;1 ist positiv&quot;</code></pre>
<p>Wir setzen hier zunächst x als 1. Danach kommt die logische Abfrage, welche entweder <code>TRUE</code> oder <code>FALSE</code> sein muss. Ist das Ergebnis <code>TRUE</code>, dann wird der Code in den ersten geschweiften Klammern <code>{print(paste(x, "ist positiv"))}</code> ausgeführt und die Auswertung bricht ab. Falls das Ergebnis <code>FALSE</code> ist, wird der Code in den ersten geschweiften Klammern übersprungen und der <code>else</code> Fall wird ausgeführt.</p>
<p>Alternativ können wir <code>if-else</code> auch ohne geschweift Klammern schreiben:</p>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="kontrollstrukturen.html#cb234-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb234-2"><a href="kontrollstrukturen.html#cb234-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb234-3"><a href="kontrollstrukturen.html#cb234-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (x <span class="sc">&gt;</span> <span class="dv">0</span>) </span>
<span id="cb234-4"><a href="kontrollstrukturen.html#cb234-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(x, <span class="st">&quot;ist positiv&quot;</span>)) <span class="cf">else</span></span>
<span id="cb234-5"><a href="kontrollstrukturen.html#cb234-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">paste</span>(x, <span class="st">&quot;ist nicht-positiv&quot;</span>))</span></code></pre></div>
<pre><code>## [1] &quot;1 ist positiv&quot;</code></pre>
<p>Hierbei gilt es allerdings zu beachten, dass, wenn wir nur die erste Zeile (<code>if (x &gt; 0)</code>) ausführen, der restliche Code erst mal nicht berücksichtigt wird. Wir erhalten eine <em>partiell</em> ausgeführte Funktion zurück, welche noch weitere Eingaben erwartet. Führen wir die folgenden beiden Zeilen aus, kommen wir zum selben Ergebnis. Was zunächst umständlich erscheint, ist im <code>body</code> einer Funktion kein Problem, da dieser sowieso von oben nach unten durchläuft.</p>
<p>Ein Beispiel für eine Funktion mit Fallunterscheidung könnte so aussehen:</p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="kontrollstrukturen.html#cb236-1" aria-hidden="true" tabindex="-1"></a>is.positive <span class="ot">&lt;-</span> <span class="cf">function</span>(x) {</span>
<span id="cb236-2"><a href="kontrollstrukturen.html#cb236-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb236-3"><a href="kontrollstrukturen.html#cb236-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (x <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb236-4"><a href="kontrollstrukturen.html#cb236-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">TRUE</span>)</span>
<span id="cb236-5"><a href="kontrollstrukturen.html#cb236-5" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb236-6"><a href="kontrollstrukturen.html#cb236-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">FALSE</span>)</span>
<span id="cb236-7"><a href="kontrollstrukturen.html#cb236-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb236-8"><a href="kontrollstrukturen.html#cb236-8" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb236-9"><a href="kontrollstrukturen.html#cb236-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb236-10"><a href="kontrollstrukturen.html#cb236-10" aria-hidden="true" tabindex="-1"></a><span class="fu">is.positive</span>(<span class="sc">-</span><span class="fl">1.1</span>)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="kontrollstrukturen.html#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.positive</span>(<span class="dv">11</span>)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>Es mal ohne geschweifte Klammern umzuschreiben wäre eine gute Übung!</p>
<div id="vektorisierte-fallunterscheidungen" class="section level3 hasAnchor" number="9.3.1">
<h3><span class="header-section-number">9.3.1</span> Vektorisierte Fallunterscheidungen<a href="kontrollstrukturen.html#vektorisierte-fallunterscheidungen" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Wollen wir <code>if-else</code> auf einen Vektor anwenden und erwarten einen Vektor als Ergebnis, müssen wir keine eigene Funktion schreiben. Es existieren bereits vektorisierte <code>if-else</code> Funktion, zum Beispiel aus dem Package <code>dplyr::</code>:</p>
<div class="sourceCode" id="cb240"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb240-1"><a href="kontrollstrukturen.html#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb240-2"><a href="kontrollstrukturen.html#cb240-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-3"><a href="kontrollstrukturen.html#cb240-3" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1991</span>, <span class="dv">2004</span>, <span class="dv">1988</span>)</span>
<span id="cb240-4"><a href="kontrollstrukturen.html#cb240-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-5"><a href="kontrollstrukturen.html#cb240-5" aria-hidden="true" tabindex="-1"></a><span class="fu">if_else</span>(<span class="at">condition =</span> x <span class="sc">&gt;=</span> <span class="dv">1981</span> <span class="sc">&amp;</span> x <span class="sc">&lt;=</span> <span class="dv">1996</span>,</span>
<span id="cb240-6"><a href="kontrollstrukturen.html#cb240-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">true      =</span> <span class="st">&quot;Millennial&quot;</span>,</span>
<span id="cb240-7"><a href="kontrollstrukturen.html#cb240-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">false     =</span> <span class="st">&quot;kein Millennial&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;Millennial&quot;      &quot;kein Millennial&quot; &quot;Millennial&quot;</code></pre>
<p>Wenn ihr mehr als zwei Fälle (<code>TRUE</code> und <code>FALSE</code>) unterscheiden wollt, bietet sich die ebenfalls vektorisierte <code>dplyr::case_when()</code> Funktion an. Eine Beispielanwendung dafür könnte die Kategorisierung einer stetigen Variable sein:</p>
<div class="sourceCode" id="cb242"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb242-1"><a href="kontrollstrukturen.html#cb242-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span></span>
<span id="cb242-2"><a href="kontrollstrukturen.html#cb242-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(name, birth_year) <span class="sc">%&gt;%</span></span>
<span id="cb242-3"><a href="kontrollstrukturen.html#cb242-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb242-4"><a href="kontrollstrukturen.html#cb242-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">age_categorized =</span> <span class="fu">case_when</span>(</span>
<span id="cb242-5"><a href="kontrollstrukturen.html#cb242-5" aria-hidden="true" tabindex="-1"></a>      birth_year <span class="sc">&gt;</span> <span class="dv">200</span>                     <span class="sc">~</span> <span class="st">&quot;stone_old&quot;</span>,</span>
<span id="cb242-6"><a href="kontrollstrukturen.html#cb242-6" aria-hidden="true" tabindex="-1"></a>      birth_year <span class="sc">&lt;=</span> <span class="dv">200</span> <span class="sc">&amp;</span> birth_year <span class="sc">&gt;</span> <span class="dv">100</span> <span class="sc">~</span> <span class="st">&quot;old&quot;</span>,</span>
<span id="cb242-7"><a href="kontrollstrukturen.html#cb242-7" aria-hidden="true" tabindex="-1"></a>      birth_year <span class="sc">&lt;=</span> <span class="dv">100</span> <span class="sc">&amp;</span> birth_year <span class="sc">&gt;</span> <span class="dv">20</span>  <span class="sc">~</span> <span class="st">&quot;mid_aged&quot;</span>,</span>
<span id="cb242-8"><a href="kontrollstrukturen.html#cb242-8" aria-hidden="true" tabindex="-1"></a>      birth_year <span class="sc">&lt;=</span> <span class="dv">20</span>                     <span class="sc">~</span> <span class="st">&quot;young&quot;</span>,</span>
<span id="cb242-9"><a href="kontrollstrukturen.html#cb242-9" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&quot;other&quot;</span> <span class="co"># catch them all</span></span>
<span id="cb242-10"><a href="kontrollstrukturen.html#cb242-10" aria-hidden="true" tabindex="-1"></a>    ) </span>
<span id="cb242-11"><a href="kontrollstrukturen.html#cb242-11" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 87 × 3
##    name               birth_year age_categorized
##    &lt;chr&gt;                   &lt;dbl&gt; &lt;chr&gt;          
##  1 Luke Skywalker           19   young          
##  2 C-3PO                   112   old            
##  3 R2-D2                    33   mid_aged       
##  4 Darth Vader              41.9 mid_aged       
##  5 Leia Organa              19   young          
##  6 Owen Lars                52   mid_aged       
##  7 Beru Whitesun lars       47   mid_aged       
##  8 R5-D4                    NA   other          
##  9 Biggs Darklighter        24   mid_aged       
## 10 Obi-Wan Kenobi           57   mid_aged       
## # … with 77 more rows</code></pre>
<p><em>Anmerkung:</em> Falls euch dieses Zeichen unbekannt vorkommt: <code>%&gt;%</code> dann schaut doch noch mal in das Kapitel <a href="funktionen.html#funktionen">5</a>, dort haben wir Pipes mit der analogen base-R Notation (<code>|&gt;</code>) eingeführt.</p>
<p>Im Beispiel wird eine neue Spalte <code>age_categorized</code> angelegt, welche eine Kategorisierung des Geburtsalters darstellt. Die einzelnen Fälle, welche in <code>case_when()</code> beschrieben werden, sind dabei jeweils durch ein Komma <code>,</code> getrennt. Vor der Tilde <code>~</code> kommt immer die Bedingung. Dahinter steht, was in diesem Fall passieren soll. Die letzte Bedingung <code>TRUE</code> ist immer wahr und greift dann, wenn alle vorherigen Bedingungen zu <code>FALSE</code> evaluiert worden sind. In unserem Beispiel fallen darunter alle <code>NA</code>-Werte. Die Rückgabe ist ein character-Vektor derselben Länge wie der von der Variable <code>birth_year</code>.</p>
</div>
</div>
<div id="schleifen" class="section level2 hasAnchor" number="9.4">
<h2><span class="header-section-number">9.4</span> Schleifen<a href="kontrollstrukturen.html#schleifen" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Schleifen (Loops) dienen dem wiederholten Ausführen eines Anweisungsblocks (loop
body). Es gibt sie in verschiedenen Varianten:</p>
<ol style="list-style-type: decimal">
<li><code>for (i in I) {Anweisung}</code></li>
</ol>
<ul>
<li>Interpretation: Wiederhole Ausdruck für jeden Indexwert <code>i</code> in der Indexmenge
<code>I</code>.</li>
</ul>
<ol start="2" style="list-style-type: decimal">
<li><code>while (Bedingung) {Anweisung}</code></li>
</ol>
<ul>
<li>Intepretation: Wiederhole <code>Anweisung</code>, solange Bedingung erfüllt ist.</li>
</ul>
<ol start="3" style="list-style-type: decimal">
<li><code>repeat {Anweisung}</code></li>
</ol>
<ul>
<li>Interpretation: Wiederhole die Anweisung.</li>
</ul>
<p><em>Anmerkung:</em> Zusätzlich lassen sich diese Loops steuern mit <code>next</code> (springt zur nächsten
Iteration) und <code>break</code> (bricht die Schleife ab).</p>
<p>Wir werden uns hier nur noch der wohl gängigsten Methode, nämlich des <code>for-loops</code>, widmen. Schauen wir uns zunächst das einfachste Beispiel für einen <code>for-loop</code> an:</p>
<div class="sourceCode" id="cb244"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb244-1"><a href="kontrollstrukturen.html#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>){</span>
<span id="cb244-2"><a href="kontrollstrukturen.html#cb244-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(i)</span>
<span id="cb244-3"><a href="kontrollstrukturen.html#cb244-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## [1] 1
## [1] 2
## [1] 3
## [1] 4
## [1] 5
## [1] 6
## [1] 7
## [1] 8
## [1] 9
## [1] 10</code></pre>
<p>Der <code>for-loop</code> iteriert über einen Vektor mit den Zahlen 1 bis 10 und führt den Code in den geschweiften Klammern in jeder Iteration aus. Der Index <code>i</code> wird nach jedem Schleifendurchlauf um eine Position inkrementiert.</p>
<p>Mit diesem Wissen können wir nun einen <code>for-loop</code> schreiben, welcher über die Werte eines Vectors iteriert und jeweils den Wert der i’ten Position im Quadrat in einen neuen Vektor schreibt.</p>
<div class="sourceCode" id="cb246"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb246-1"><a href="kontrollstrukturen.html#cb246-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb246-2"><a href="kontrollstrukturen.html#cb246-2" aria-hidden="true" tabindex="-1"></a>v2 <span class="ot">&lt;-</span> <span class="fu">numeric</span>(<span class="at">length =</span> <span class="dv">10</span>) <span class="co"># leeren Vektor anlegen</span></span>
<span id="cb246-3"><a href="kontrollstrukturen.html#cb246-3" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb246-4"><a href="kontrollstrukturen.html#cb246-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>){</span>
<span id="cb246-5"><a href="kontrollstrukturen.html#cb246-5" aria-hidden="true" tabindex="-1"></a>  v2[i] <span class="ot">&lt;-</span> <span class="fu">sqrt</span>(v1[i])</span>
<span id="cb246-6"><a href="kontrollstrukturen.html#cb246-6" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb246-7"><a href="kontrollstrukturen.html#cb246-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb246-8"><a href="kontrollstrukturen.html#cb246-8" aria-hidden="true" tabindex="-1"></a>v2</span></code></pre></div>
<pre><code>##  [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751 2.828427 3.000000 3.162278</code></pre>
<p>Da die meisten Funktionen in R bereits vektorisiert sind (<code>sqrt(v1)</code>) ist ein <code>for-loop</code> nicht immer die beste Variante, manchmal kann er allerdings sehr hilfreich sein.</p>
</div>
<div id="vektorisiertes-programmieren" class="section level2 hasAnchor" number="9.5">
<h2><span class="header-section-number">9.5</span> Vektorisiertes Programmieren<a href="kontrollstrukturen.html#vektorisiertes-programmieren" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Vektorisierte Programmieren bedeutet, dass wir Operationen auf einem Vektor ausführen und dementsprechenden einen Vektor zurückbekommen. Dabei wird eine Funktion auf jedes Element eines Vektors angewandt, was auch eine Möglichkeit ist, iterative Probleme zu lösen. Im letzten Teil wollen wir uns jetzt noch die <code>purrr::map()</code> Funktionsfamilie anschauen, welche vektorbasiert funktioniert. Alternativ dazu gibt es im <code>base</code>-R die <code>lapply()</code> Funktionsfamilie, welche eine ähnliche Intention verfolgt, die wir uns aber nicht mehr anschauen werden können.</p>
<p>Die Aufgabe, welche wir gerade mit einem <code>for-loop</code> gelöst haben, kann man alternativ auch vektorbasiert mit <code>map()</code> lösen:</p>
<div class="sourceCode" id="cb248"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb248-1"><a href="kontrollstrukturen.html#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span></code></pre></div>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="kontrollstrukturen.html#cb249-1" aria-hidden="true" tabindex="-1"></a>v1 <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span></span>
<span id="cb249-2"><a href="kontrollstrukturen.html#cb249-2" aria-hidden="true" tabindex="-1"></a><span class="fu">map_dbl</span>(<span class="at">.x =</span> v1,</span>
<span id="cb249-3"><a href="kontrollstrukturen.html#cb249-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">.f =</span> sqrt)</span></code></pre></div>
<pre><code>##  [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751 2.828427 3.000000 3.162278</code></pre>
<p>Dabei passiert folgendes (<code>fun steht für function</code>):</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-129"></span>
<img src="resources/map.png" alt="Quelle: https://tutorials.shinyapps.io/map-intro/_w_543ccdaf/www/images/map.png" width="80%" />
<p class="caption">
Abb. 9.1: Quelle: <a href="https://tutorials.shinyapps.io/map-intro/_w_543ccdaf/www/images/map.png" class="uri">https://tutorials.shinyapps.io/map-intro/_w_543ccdaf/www/images/map.png</a>
</p>
</div>
<p>Generell sind die <code>map()</code> Funktionen nach diesem Schema aufgebaut:</p>
<div class="sourceCode" id="cb251"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb251-1"><a href="kontrollstrukturen.html#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map_rueckgabetyp</span>(liste, funktion) </span></code></pre></div>
<p><em>Wichtig!</em>: Wenn wir eine Funktion als Objekt übergeben, setzen wir keine Klammern.</p>
<p>Der Rückgabetyp, welchen wir oben im Beispiel verwendet haben war <code>dbl</code>, was einer Fließkommazahl, also im Prinzip <code>numeric</code> entspricht. Als erstes Argument übergibt man eine Liste oder besser gesagt einen Vektor. Die Liste ist eigentlich nur ein Sonderfall von verschachtelten Vektoren, weshalb wir auch einen Vektor übergeben können. Richtig nützlich wird <code>map()</code> aber erst, wenn man es mit Listen zu tun hat. Das Zweite Argument ist eine Funktion, welche über ihren Namen als an <code>map()</code> übergeben wird.</p>
<p>Benutzen wir die <code>map()</code> Funktion ohne Rückgabetyp, bekommen wir immer eine Liste zurück:</p>
<div class="sourceCode" id="cb252"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb252-1"><a href="kontrollstrukturen.html#cb252-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, log) <span class="sc">%&gt;%</span> <span class="fu">head</span>(<span class="dv">3</span>)</span></code></pre></div>
<pre><code>## [[1]]
## [1] 0
## 
## [[2]]
## [1] 0.6931472
## 
## [[3]]
## [1] 1.098612</code></pre>
<p>Was für Funktionen es alles gibt, ist unter anderem auf dem <a href="https://github.com/rstudio/cheatsheets/blob/main/purrr.pdf">Cheatsheet</a> zu <code>purrr::</code> sehr übersichtlich dargestellt.</p>
<p>Es ist auch möglich, der <code>map()</code> übergebenen Funktion noch weitere Argumente zu übergeben. Diese werden <code>map()</code> einfach als weitere Argumente übergeben:</p>
<div class="sourceCode" id="cb254"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb254-1"><a href="kontrollstrukturen.html#cb254-1" aria-hidden="true" tabindex="-1"></a>v1_log <span class="ot">&lt;-</span> <span class="fu">map_dbl</span>(v1, log)</span>
<span id="cb254-2"><a href="kontrollstrukturen.html#cb254-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb254-3"><a href="kontrollstrukturen.html#cb254-3" aria-hidden="true" tabindex="-1"></a><span class="fu">map_dbl</span>(<span class="at">.x =</span> v1_log, </span>
<span id="cb254-4"><a href="kontrollstrukturen.html#cb254-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">.f =</span> round, </span>
<span id="cb254-5"><a href="kontrollstrukturen.html#cb254-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">digits =</span> <span class="dv">2</span>)</span></code></pre></div>
<pre><code>##  [1] 0.00 0.69 1.10 1.39 1.61 1.79 1.95 2.08 2.20 2.30</code></pre>
<p>Über sogenannte anonyme Funktionen (welche keinen Namen haben), können wir gleich in der Argumentstelle von <code>map()</code>, welche die Funktion entgegennimmt, eigene Funktionen schreiben.</p>
<p>Beispiel:</p>
<div class="sourceCode" id="cb256"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb256-1"><a href="kontrollstrukturen.html#cb256-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map_dbl</span>(v1, <span class="sc">~</span> <span class="fu">log</span>(.x) <span class="sc">%&gt;%</span> <span class="fu">round</span>(<span class="dv">2</span>))</span></code></pre></div>
<pre><code>##  [1] 0.00 0.69 1.10 1.39 1.61 1.79 1.95 2.08 2.20 2.30</code></pre>
<p>Die Tilde (<code>~</code>) zeigt dabei an, dass eine Funktion folgt. Mit <code>.x</code> kann man das aktuelle Listenelement ansprechen. Ausgeschrieben könnte die Funktion so ausschauen:</p>
<div class="sourceCode" id="cb258"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb258-1"><a href="kontrollstrukturen.html#cb258-1" aria-hidden="true" tabindex="-1"></a>un_lambda <span class="ot">&lt;-</span> <span class="cf">function</span> (x) {</span>
<span id="cb258-2"><a href="kontrollstrukturen.html#cb258-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">round</span>(<span class="fu">log</span>(x), <span class="dv">2</span>)</span>
<span id="cb258-3"><a href="kontrollstrukturen.html#cb258-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Natürlich könnt ihr die Funktionen auch erst schreiben und dann nur noch über den Namen <code>map()</code> als Argument weiter reichen.</p>
<p>Dem Beispiel folgend:</p>
<div class="sourceCode" id="cb259"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb259-1"><a href="kontrollstrukturen.html#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="fu">map_dbl</span>(v1, un_lambda)</span></code></pre></div>
<pre><code>##  [1] 0.00 0.69 1.10 1.39 1.61 1.79 1.95 2.08 2.20 2.30</code></pre>
<p>Bei diesem Vorgehen empfiehlt es sich, einen aussagekräftigeren Namen für die Funktion zu wählen, welcher auch andeutet, was die Funktion macht.</p>
</div>
<div id="prüfe-dich-selbst-5" class="section level2 hasAnchor" number="9.6">
<h2><span class="header-section-number">9.6</span> Prüfe dich selbst<a href="kontrollstrukturen.html#prüfe-dich-selbst-5" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Von dieser Sitzung solltest du olgendes mitgenommen haben:</p>
<ul class="task-list">
<li><input type="checkbox" disabled="" checked="" />
Du solltest Funktionen in R selber schreiben können.</li>
<li><input type="checkbox" disabled="" checked="" />
Du solltest Kontrollstrukturen dazu nutzen können, eigene Probleme zu lösen.</li>
<li><input type="checkbox" disabled="" checked="" />
Du solltest mindestens zwei Möglichkeiten nennen können, wie man in R iterative Probleme lösen kann.</li>
<li><input type="checkbox" disabled="" checked="" />
Du solltest verstanden haben, wie vektorisierte Funktionen ausgewertet werden.</li>
</ul>

<div id="refs" class="references csl-bib-body hanging-indent">
<div class="csl-entry">
n.d. <a href="https://cran.r-project.org/doc/manuals/r-release/R-intro.html">https://cran.r-project.org/doc/manuals/r-release/R-intro.html</a>.
</div>
<div class="csl-entry">
Chambers, John M. 2014. <span>“Object-Oriented Programming, Functional Programming and r.”</span> <a href="https://doi.org/10.48550/ARXIV.1409.3531">https://doi.org/10.48550/ARXIV.1409.3531</a>.
</div>
<div class="csl-entry">
Grolemund, Garrett. 2014. <em>Hands-on Programming with r: Write Your Own Functions and Simulations</em>. " O’Reilly Media, Inc.". <a href="https://rstudio-education.github.io/hopr/">https://rstudio-education.github.io/hopr/</a>.
</div>
<div class="csl-entry">
Wickham, Hadley. 2019. <em>Advanced r</em>. CRC press. <a href="https://adv-r.hadley.nz/">https://adv-r.hadley.nz/</a>.
</div>
</div>
</div>
</div>








            </section>

          </div>
        </div>
      </div>
<a href="tidyverse.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/peer-schwertfeger/handout_r_kurs/edit/master/10-kontrollstrukturen.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/peer-schwertfeger/handout_r_kurs/blob/master/10-kontrollstrukturen.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
