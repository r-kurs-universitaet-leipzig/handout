<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Kapitel 8 Tidyverse | Handout für R Grundkurs</title>
  <meta name="description" content="Kapitel 8 Tidyverse | Handout für R Grundkurs" />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="Kapitel 8 Tidyverse | Handout für R Grundkurs" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Kapitel 8 Tidyverse | Handout für R Grundkurs" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="dateimanagement.html"/>
<link rel="next" href="kontrollstrukturen.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="libs/d3-3.3.8/d3.min.js"></script>
<script src="libs/dagre-0.4.0/dagre-d3.min.js"></script>
<link href="libs/mermaid-0.3.0/dist/mermaid.css" rel="stylesheet" />
<script src="libs/mermaid-0.3.0/dist/mermaid.slim.min.js"></script>
<link href="libs/DiagrammeR-styles-0.2/styles.css" rel="stylesheet" />
<script src="libs/chromatography-0.1/chromatography.js"></script>
<script src="libs/DiagrammeR-binding-1.0.9/DiagrammeR.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Handout R Kurs</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Vorwort</a></li>
<li class="chapter" data-level="" data-path="hinweise-zur-verwendung-des-handouts.html"><a href="hinweise-zur-verwendung-des-handouts.html"><i class="fa fa-check"></i>Hinweise zur Verwendung des Handouts</a></li>
<li class="chapter" data-level="1" data-path="einführung.html"><a href="einführung.html"><i class="fa fa-check"></i><b>1</b> Einführung</a>
<ul>
<li class="chapter" data-level="1.1" data-path="einführung.html"><a href="einführung.html#was-ist-r-und-warum-sollte-man-r-lernen"><i class="fa fa-check"></i><b>1.1</b> Was ist R und warum sollte man R lernen?</a></li>
<li class="chapter" data-level="1.2" data-path="einführung.html"><a href="einführung.html#installation"><i class="fa fa-check"></i><b>1.2</b> Installation</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="oberfläche.html"><a href="oberfläche.html"><i class="fa fa-check"></i><b>2</b> Oberfläche</a>
<ul>
<li class="chapter" data-level="2.1" data-path="oberfläche.html"><a href="oberfläche.html#r-gui"><i class="fa fa-check"></i><b>2.1</b> R GUI</a></li>
<li class="chapter" data-level="2.2" data-path="oberfläche.html"><a href="oberfläche.html#rstudio"><i class="fa fa-check"></i><b>2.2</b> RStudio</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="oberfläche.html"><a href="oberfläche.html#console"><i class="fa fa-check"></i><b>2.2.1</b> Console</a></li>
<li class="chapter" data-level="2.2.2" data-path="oberfläche.html"><a href="oberfläche.html#script-editor"><i class="fa fa-check"></i><b>2.2.2</b> Script Editor</a></li>
<li class="chapter" data-level="2.2.3" data-path="oberfläche.html"><a href="oberfläche.html#file-editor-und-environment"><i class="fa fa-check"></i><b>2.2.3</b> File-Editor und Environment</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="oberfläche.html"><a href="oberfläche.html#prüfe-dich-selbst"><i class="fa fa-check"></i><b>2.3</b> Prüfe dich selbst</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html"><i class="fa fa-check"></i><b>3</b> Atomare Datentypen</a>
<ul>
<li class="chapter" data-level="3.1" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#arithmetische-grundoperationen-und-basisfunktionen"><i class="fa fa-check"></i><b>3.1</b> Arithmetische Grundoperationen und Basisfunktionen</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#funktionsaufrufe"><i class="fa fa-check"></i><b>3.1.1</b> Funktionsaufrufe</a></li>
<li class="chapter" data-level="3.1.2" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#objekte-funktionen-und-referenzen"><i class="fa fa-check"></i><b>3.1.2</b> Objekte, Funktionen und Referenzen</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#erzeugung-von-referenzierbaren-objekten"><i class="fa fa-check"></i><b>3.2</b> Erzeugung von referenzierbaren Objekten</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#anmerkung-namen"><i class="fa fa-check"></i><b>3.2.1</b> Anmerkung Namen</a></li>
<li class="chapter" data-level="3.2.2" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#rechnungen-mit-werten-von-objekten"><i class="fa fa-check"></i><b>3.2.2</b> Rechnungen mit Werten von Objekten</a></li>
<li class="chapter" data-level="3.2.3" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#namen-überschreiben"><i class="fa fa-check"></i><b>3.2.3</b> Namen überschreiben</a></li>
<li class="chapter" data-level="3.2.4" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#objekte-löschen"><i class="fa fa-check"></i><b>3.2.4</b> Objekte löschen</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#logische-werte-und-operationen"><i class="fa fa-check"></i><b>3.3</b> Logische Werte und Operationen</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#der-logische-wert-na"><i class="fa fa-check"></i><b>3.3.1</b> Der “logische” Wert NA</a></li>
<li class="chapter" data-level="3.3.2" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#vergleichs-operationen"><i class="fa fa-check"></i><b>3.3.2</b> Vergleichs-Operationen</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#zeichenketten-character-strings"><i class="fa fa-check"></i><b>3.4</b> Zeichenketten (character strings)</a></li>
<li class="chapter" data-level="3.5" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#klasse-eines-datenobjektes"><i class="fa fa-check"></i><b>3.5</b> Klasse eines Datenobjektes</a></li>
<li class="chapter" data-level="3.6" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#spezielle-werte"><i class="fa fa-check"></i><b>3.6</b> Spezielle Werte</a></li>
<li class="chapter" data-level="3.7" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#prüfe-dich-selbst-1"><i class="fa fa-check"></i><b>3.7</b> Prüfe dich selbst</a></li>
<li class="chapter" data-level="3.8" data-path="atomare-datentypen.html"><a href="atomare-datentypen.html#literaturverweise"><i class="fa fa-check"></i><b>3.8</b> Literaturverweise</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html"><i class="fa fa-check"></i><b>4</b> Strukturierte Datentypen</a>
<ul>
<li class="chapter" data-level="4.1" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#vektoren"><i class="fa fa-check"></i><b>4.1</b> Vektoren</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#abfragen-von-werten-durch-subsetting-von-vektoren"><i class="fa fa-check"></i><b>4.1.1</b> Abfragen von Werten durch Subsetting von Vektoren</a></li>
<li class="chapter" data-level="4.1.2" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#vektorisierte-operationen"><i class="fa fa-check"></i><b>4.1.2</b> Vektorisierte Operationen</a></li>
<li class="chapter" data-level="4.1.3" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#operationen-auf-vektoren"><i class="fa fa-check"></i><b>4.1.3</b> Operationen auf Vektoren</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#matrizen"><i class="fa fa-check"></i><b>4.2</b> Matrizen</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#benennung-von-spalten"><i class="fa fa-check"></i><b>4.2.1</b> Benennung von Spalten</a></li>
<li class="chapter" data-level="4.2.2" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#erzeugung-von-matrizen-aus-vektoren"><i class="fa fa-check"></i><b>4.2.2</b> Erzeugung von Matrizen aus Vektoren</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#listen"><i class="fa fa-check"></i><b>4.3</b> Listen</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#indizierung-von-listen"><i class="fa fa-check"></i><b>4.3.1</b> Indizierung von Listen</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#data-frames"><i class="fa fa-check"></i><b>4.4</b> Data Frames</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#indizierung-von-datentabellen"><i class="fa fa-check"></i><b>4.4.1</b> Indizierung von Datentabellen</a></li>
<li class="chapter" data-level="4.4.2" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#aufname-weiterer-variablenspalten"><i class="fa fa-check"></i><b>4.4.2</b> Aufname weiterer Variablen/Spalten</a></li>
<li class="chapter" data-level="4.4.3" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#operationen-auf-datentabellen"><i class="fa fa-check"></i><b>4.4.3</b> Operationen auf Datentabellen</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="strukturierte-datentypen.html"><a href="strukturierte-datentypen.html#prüfe-dich-selbst-2"><i class="fa fa-check"></i><b>4.5</b> Prüfe dich selbst</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="funktionen.html"><a href="funktionen.html"><i class="fa fa-check"></i><b>5</b> Funktionen</a>
<ul>
<li class="chapter" data-level="5.1" data-path="funktionen.html"><a href="funktionen.html#eigenschaften"><i class="fa fa-check"></i><b>5.1</b> Eigenschaften</a></li>
<li class="chapter" data-level="5.2" data-path="funktionen.html"><a href="funktionen.html#aufbau"><i class="fa fa-check"></i><b>5.2</b> Aufbau</a></li>
<li class="chapter" data-level="5.3" data-path="funktionen.html"><a href="funktionen.html#verschachtelungen"><i class="fa fa-check"></i><b>5.3</b> Verschachtelungen</a></li>
<li class="chapter" data-level="5.4" data-path="funktionen.html"><a href="funktionen.html#pipes"><i class="fa fa-check"></i><b>5.4</b> Pipes</a></li>
<li class="chapter" data-level="5.5" data-path="funktionen.html"><a href="funktionen.html#default-werte"><i class="fa fa-check"></i><b>5.5</b> Default Werte</a></li>
<li class="chapter" data-level="5.6" data-path="funktionen.html"><a href="funktionen.html#help-fenster"><i class="fa fa-check"></i><b>5.6</b> Help Fenster</a></li>
<li class="chapter" data-level="5.7" data-path="funktionen.html"><a href="funktionen.html#prüfe-dich-selbst-3"><i class="fa fa-check"></i><b>5.7</b> Prüfe dich selbst</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="packages.html"><a href="packages.html"><i class="fa fa-check"></i><b>6</b> Packages</a>
<ul>
<li class="chapter" data-level="6.1" data-path="packages.html"><a href="packages.html#packages-installieren-und-laden"><i class="fa fa-check"></i><b>6.1</b> Packages installieren und Laden</a></li>
<li class="chapter" data-level="6.2" data-path="packages.html"><a href="packages.html#needs"><i class="fa fa-check"></i><b>6.2</b> needs()</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="dateimanagement.html"><a href="dateimanagement.html"><i class="fa fa-check"></i><b>7</b> Dateimanagement</a>
<ul>
<li class="chapter" data-level="7.1" data-path="dateimanagement.html"><a href="dateimanagement.html#absolute-und-relative-dateipfade-exkurs"><i class="fa fa-check"></i><b>7.1</b> Absolute und relative Dateipfade (Exkurs)</a></li>
<li class="chapter" data-level="7.2" data-path="dateimanagement.html"><a href="dateimanagement.html#r-projects"><i class="fa fa-check"></i><b>7.2</b> R Projects</a></li>
<li class="chapter" data-level="7.3" data-path="dateimanagement.html"><a href="dateimanagement.html#dateien-einlesen"><i class="fa fa-check"></i><b>7.3</b> Dateien einlesen</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="dateimanagement.html"><a href="dateimanagement.html#r-interne-dateien"><i class="fa fa-check"></i><b>7.3.1</b> R-interne Dateien</a></li>
<li class="chapter" data-level="7.3.2" data-path="dateimanagement.html"><a href="dateimanagement.html#r-externe-dateien"><i class="fa fa-check"></i><b>7.3.2</b> R-externe Dateien</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="tidyverse.html"><a href="tidyverse.html"><i class="fa fa-check"></i><b>8</b> Tidyverse</a>
<ul>
<li class="chapter" data-level="8.1" data-path="tidyverse.html"><a href="tidyverse.html#das-tidyverse"><i class="fa fa-check"></i><b>8.1</b> Das “Tidyverse”</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="tidyverse.html"><a href="tidyverse.html#tidyverse-laden"><i class="fa fa-check"></i><b>8.1.1</b> Tidyverse laden</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="tidyverse.html"><a href="tidyverse.html#dplyr"><i class="fa fa-check"></i><b>8.2</b> <code>dplyr::</code></a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="tidyverse.html"><a href="tidyverse.html#daten-verfügbar-machen"><i class="fa fa-check"></i><b>8.2.1</b> Daten verfügbar machen</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="tidyverse.html"><a href="tidyverse.html#variablen-manipulieren"><i class="fa fa-check"></i><b>8.3</b> Variablen Manipulieren</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="tidyverse.html"><a href="tidyverse.html#neue-variablen-erstellen"><i class="fa fa-check"></i><b>8.3.1</b> Neue Variablen erstellen</a></li>
<li class="chapter" data-level="8.3.2" data-path="tidyverse.html"><a href="tidyverse.html#variablen-umbennen"><i class="fa fa-check"></i><b>8.3.2</b> Variablen umbennen</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="tidyverse.html"><a href="tidyverse.html#fälle-manipulieren"><i class="fa fa-check"></i><b>8.4</b> Fälle Manipulieren</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="tidyverse.html"><a href="tidyverse.html#fälle-gruppieren"><i class="fa fa-check"></i><b>8.4.1</b> Fälle Gruppieren</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="tidyverse.html"><a href="tidyverse.html#prüfe-dich-selbst-4"><i class="fa fa-check"></i><b>8.5</b> Prüfe dich selbst</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="kontrollstrukturen.html"><a href="kontrollstrukturen.html"><i class="fa fa-check"></i><b>9</b> Kontrollstrukturen</a>
<ul>
<li class="chapter" data-level="9.1" data-path="kontrollstrukturen.html"><a href="kontrollstrukturen.html#prinzipien-der-programmierung"><i class="fa fa-check"></i><b>9.1</b> Prinzipien der Programmierung</a></li>
<li class="chapter" data-level="9.2" data-path="kontrollstrukturen.html"><a href="kontrollstrukturen.html#funktionen-selber-schreiben"><i class="fa fa-check"></i><b>9.2</b> Funktionen selber schreiben</a></li>
<li class="chapter" data-level="9.3" data-path="kontrollstrukturen.html"><a href="kontrollstrukturen.html#kontrollstrukturen-1"><i class="fa fa-check"></i><b>9.3</b> Kontrollstrukturen</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="kontrollstrukturen.html"><a href="kontrollstrukturen.html#vektorisierte-fallunterscheidungen"><i class="fa fa-check"></i><b>9.3.1</b> Vektorisierte Fallunterscheidungen</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="kontrollstrukturen.html"><a href="kontrollstrukturen.html#schleifen"><i class="fa fa-check"></i><b>9.4</b> Schleifen</a></li>
<li class="chapter" data-level="9.5" data-path="kontrollstrukturen.html"><a href="kontrollstrukturen.html#vektorisiertes-programmieren"><i class="fa fa-check"></i><b>9.5</b> Vektorisiertes Programmieren</a></li>
<li class="chapter" data-level="9.6" data-path="kontrollstrukturen.html"><a href="kontrollstrukturen.html#prüfe-dich-selbst-5"><i class="fa fa-check"></i><b>9.6</b> Prüfe dich selbst</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Handout für R Grundkurs</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tidyverse" class="section level1 hasAnchor" number="8">
<h1><span class="header-section-number">Kapitel 8</span> Tidyverse<a href="tidyverse.html#tidyverse" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In diesem Kapitel wollen wir uns damit auseinandersetzen, was das Tidyverse ist und was für Funktionen die einzelnen Pachages dieses uns bereitstellen. Einen besonderen Fokus wollen wir vor allem erstmal auf die Datenverarbeitung legen, die diese im Regelfall auch die meiste Zeit beansprucht.</p>
<div id="das-tidyverse" class="section level2 hasAnchor" number="8.1">
<h2><span class="header-section-number">8.1</span> Das “Tidyverse”<a href="tidyverse.html#das-tidyverse" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Das Tidyverse ist eine Sammlung von Packages, welche einer gemeinsamen Grammatik folgen. Im Folgenden wird ein Package immer durch die doppelten Punkte gekennzeichnet sein, zum Beispiel: <code>dplyr::</code>. Das entspricht in R der Syntax, um eine Funktion aus einem bestimmten Package-Scope abzurufen. So können zwei Funktionen zwar den gleichen Namen haben, aber unterschiedlich implementiert sein, wie etwa <code>dplyr::filter()</code> und <code>stats::filter()</code>, welche in eurem Skript uneindeutig einfach nur <code>filter()</code> heißen könnten. Bei solchen Konflikten, ist es ratsam des jeweilige Package, aus welchem man die Funktion aufrufen will <em>explizit</em> zu deklarieren, also samt <code>dplyr::</code>.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-95"></span>
<img src="resources/tidyverse_components_new.png" alt="Tidyverse Components Logo" width="70%" />
<p class="caption">
Abb. 8.1: Tidyverse Components Logo
</p>
</div>
<p>Die Logos der wichtigsten Packages könnt ihr in der Abbildung sehen. Wir werden immer wieder auf einige von diesen zurückkommen und diese nach und nach anzuwenden lernen.</p>
<div id="tidyverse-laden" class="section level3 hasAnchor" number="8.1.1">
<h3><span class="header-section-number">8.1.1</span> Tidyverse laden<a href="tidyverse.html#tidyverse-laden" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Das Tidyverse ladet ihr wie jedes andere Package auch, also zum Beispiel mit <code>library()</code> oder <code>needs()</code>. Im Prinzip ladet ihr dabei aber gleich mehrere verschiedene Packages, welche ihr dann nicht im einzelnen nochmal nachladen müsst.</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="tidyverse.html#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<pre><code>## ── Attaching packages ──────────────────────────────────────────────────────────────────────── tidyverse 1.3.1 ──</code></pre>
<pre><code>## ✔ ggplot2 3.3.6     ✔ purrr   0.3.4
## ✔ tibble  3.1.7     ✔ dplyr   1.0.9
## ✔ tidyr   1.2.0     ✔ stringr 1.4.0
## ✔ readr   2.1.2     ✔ forcats 0.5.1</code></pre>
<pre><code>## ── Conflicts ─────────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ dplyr::filter() masks stats::filter()
## ✖ dplyr::lag()    masks stats::lag()</code></pre>
<p>Die geladenen Packages werden hier mit der geladenen Version gelistet, sowie potenzielle Konflikte.</p>
</div>
</div>
<div id="dplyr" class="section level2 hasAnchor" number="8.2">
<h2><span class="header-section-number">8.2</span> <code>dplyr::</code><a href="tidyverse.html#dplyr" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In dieser Sitzung werden wir uns vornehmlich mit dem Package <code>dplyr::</code> beschäftigen. Auf dem entsprechenden <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/data-transformation.pdf">Cheatsheet</a> findet ihr alle Funktionen übersichtlich dargestellt, welche wir jetzt im Detail besprechen wollen.</p>
<div class="figure" style="text-align: center"><span style="display:block;" id="fig:unnamed-chunk-97"></span>
<img src="resources/dplyr_new.png" alt="dplyr Logo" width="30%" />
<p class="caption">
Abb. 8.2: dplyr Logo
</p>
</div>
<p><em>Hinweis:</em></p>
<p>Das Packet <code>dplyr::</code> erwartet, dass ihr sogenannte “tidy data” vorliegen habt. Das bedeutet, dass <em>jede Spalte eine Variable</em> und <em>jede Zeile eine Beobachtung/Fall</em> ist. (Vergleich auch Cheatsheet oben links) Wie ihr in der Übung sehen werdet, muss das nicht immer der Fall sein und ihr müsst, wenn eure Daten nicht “tidy” sind, diese dann erst entsprechenden anpassen. Dazu gibt es das Package <code>tidyr::</code>.</p>
<div id="daten-verfügbar-machen" class="section level3 hasAnchor" number="8.2.1">
<h3><span class="header-section-number">8.2.1</span> Daten verfügbar machen<a href="tidyverse.html#daten-verfügbar-machen" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Das Package <code>dplyr::</code> ist nicht nur eine Sammlung von verschiedenen Funktionen, sondern beinhaltet auch Datensätze in seinem “Scope”. Wenn ihr das Paket geladen habt, könnt ihr auf diese Datensätze zugreifen. Wir wollen für die folgenden Demonstrationen den Datensatz <code>starwars</code> aus <code>dplyr::</code> verwenden, welcher verschiedene Merkmale von <a href="https://de.wikipedia.org/wiki/Star_Wars">Star Wars</a> Charakteren umfasst. Über den Zuweisungsoperator können wir den Datensatz auch global verfügbar machen, indem wir ihn an den Namen <code>starwars</code> binden.</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="tidyverse.html#cb189-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="ot">&lt;-</span> dplyr<span class="sc">::</span>starwars</span>
<span id="cb189-2"><a href="tidyverse.html#cb189-2" aria-hidden="true" tabindex="-1"></a>starwars</span></code></pre></div>
<pre><code>## # A tibble: 87 × 14
##    name     height  mass hair_color skin_color eye_color birth_year sex   gender homeworld species films vehicles
##    &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;   &lt;lis&gt; &lt;list&gt;  
##  1 Luke Sk…    172    77 blond      fair       blue            19   male  mascu… Tatooine  Human   &lt;chr&gt; &lt;chr&gt;   
##  2 C-3PO       167    75 &lt;NA&gt;       gold       yellow         112   none  mascu… Tatooine  Droid   &lt;chr&gt; &lt;chr&gt;   
##  3 R2-D2        96    32 &lt;NA&gt;       white, bl… red             33   none  mascu… Naboo     Droid   &lt;chr&gt; &lt;chr&gt;   
##  4 Darth V…    202   136 none       white      yellow          41.9 male  mascu… Tatooine  Human   &lt;chr&gt; &lt;chr&gt;   
##  5 Leia Or…    150    49 brown      light      brown           19   fema… femin… Alderaan  Human   &lt;chr&gt; &lt;chr&gt;   
##  6 Owen La…    178   120 brown, gr… light      blue            52   male  mascu… Tatooine  Human   &lt;chr&gt; &lt;chr&gt;   
##  7 Beru Wh…    165    75 brown      light      blue            47   fema… femin… Tatooine  Human   &lt;chr&gt; &lt;chr&gt;   
##  8 R5-D4        97    32 &lt;NA&gt;       white, red red             NA   none  mascu… Tatooine  Droid   &lt;chr&gt; &lt;chr&gt;   
##  9 Biggs D…    183    84 black      light      brown           24   male  mascu… Tatooine  Human   &lt;chr&gt; &lt;chr&gt;   
## 10 Obi-Wan…    182    77 auburn, w… fair       blue-gray       57   male  mascu… Stewjon   Human   &lt;chr&gt; &lt;chr&gt;   
## # … with 77 more rows, and 1 more variable: starships &lt;list&gt;</code></pre>
</div>
</div>
<div id="variablen-manipulieren" class="section level2 hasAnchor" number="8.3">
<h2><span class="header-section-number">8.3</span> Variablen Manipulieren<a href="tidyverse.html#variablen-manipulieren" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Die Variablen <code>starwars$films</code>, <code>starwars$vehicles</code> und <code>starwars$starships</code> sind allesamt Listen. Diese sollen heute nicht unser Thema sein; wir können sie gleich entfernen.</p>
<p>Eine <code>base::</code> R Möglichkeit dazu wäre:</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="tidyverse.html#cb191-1" aria-hidden="true" tabindex="-1"></a>starwars[ ,<span class="fu">c</span>(<span class="st">&quot;films&quot;</span>, <span class="st">&quot;vehicles&quot;</span>, <span class="st">&quot;starships&quot;</span>)] <span class="ot">&lt;-</span> <span class="cn">NULL</span></span></code></pre></div>
<p>Hierbei verwenden wir den besonderen Datentyp <code>NULL</code>, welcher “nichts” symbolisiert. (Gar nicht so einfach “nichts” zu benennen, auch in der deutschen Sprache)
Indem wir die einzelnen Variablen auf <code>NULL</code> setzen, entfernen wir sie aus unserem Datensatz.</p>
<p>Allerdings bringt diese Variante einige Probleme mit sich:</p>
<ul>
<li>schwer zu lesen (Syntaktisch)</li>
<li>ungewünschte Objektmanipulation (Kann man nicht rückgängig machen)</li>
</ul>
<p>Eine weitere Möglichkeit unter Verwendung von <code>base::</code> R Funktionen wäre:</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="tidyverse.html#cb192-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb192-2"><a href="tidyverse.html#cb192-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">subset</span>(<span class="at">select =</span> <span class="sc">-</span><span class="fu">c</span>(films, vehicles, starships)) <span class="sc">|&gt;</span></span>
<span id="cb192-3"><a href="tidyverse.html#cb192-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dim</span>()</span></code></pre></div>
<pre><code>## [1] 87 11</code></pre>
<p>Schon sehr viel besser!</p>
<p>Allerdings könnte man auf hohem Niveau noch folgende Kritik anbringen:</p>
<ul>
<li><code>subset()</code> kennt keine klare Trennung von Fällen und Variablen (Deswegen müssen wir hier das Argument <code>select =</code> explizit angeben)</li>
<li>nur bedingt partiell ausführbar (Wir übergeben einen Vektor mit Objekten und nicht deren Namen)</li>
</ul>
<p><em>Anmerkung:</em></p>
<p>Im Folgenden wird immer wieder die Funktion <code>dim()</code> die Pipes (<code>%&gt;%</code>) abschließen. Das dient dazu, die Veränderung zu demonstrieren, ohne den ganzen Dataframe ausgeben zu müssen.</p>
<p>Jetzt noch die <code>dplyr::</code> Variante:</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="tidyverse.html#cb194-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span></span>
<span id="cb194-2"><a href="tidyverse.html#cb194-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(<span class="st">&quot;films&quot;</span>,<span class="st">&quot;vehicles&quot;</span>,<span class="st">&quot;starships&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb194-3"><a href="tidyverse.html#cb194-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dim</span>()</span></code></pre></div>
<pre><code>## [1] 87 11</code></pre>
<p><em>Anmerkung:</em>
Im Prinzip könnt ihr in fast jedem Fall die native Pipe und die Tidyverse Pipe synonym zueinander benutzen. Die wechselnde Veränderung in den Codebeispielen soll andeuten, ob wir gerade mit Tidyverse Funktionen arbeiten oder nicht.</p>
<p>Sieht zwar sehr ähnlich zum letzten Beispiel aus, ist im Detail aber doch verschieden. Zum Beispiel haben wir eine extra Funktion <code>select()</code> und nicht mehr nur ein Argument einer Funktion <code>subset(select = ...)</code>. Also bleiben wir doch voerst dabei!</p>
<p>In den Beispielen haben wir jetzt Variablen entfernt, indem wir die Negation entweder über das <code>-</code> oder das logische Symbol <code>!</code> vor unseren Vektor gesetzt haben. Natürlich können wir <code>dply::select()</code> auch dazu nutzen, um bestimmte Variablen aus einem Dataframe explizit auszuwählen:</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="tidyverse.html#cb196-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span></span>
<span id="cb196-2"><a href="tidyverse.html#cb196-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="st">&quot;height&quot;</span>, <span class="st">&quot;eye_color&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb196-3"><a href="tidyverse.html#cb196-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dim</span>()</span></code></pre></div>
<pre><code>## [1] 87  2</code></pre>
<div id="neue-variablen-erstellen" class="section level3 hasAnchor" number="8.3.1">
<h3><span class="header-section-number">8.3.1</span> Neue Variablen erstellen<a href="tidyverse.html#neue-variablen-erstellen" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Mit der Funktion <code>dplyr::mutate()</code> können wir neue Variablen erstellen und diese unserem Tibble (Dataframe) hinzufügen. Dazu können wir auch bereits existierende Variablen nutzen, was extrem eleganten Code ermöglicht!</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="tidyverse.html#cb198-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span></span>
<span id="cb198-2"><a href="tidyverse.html#cb198-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">height_in_meters =</span> height <span class="sc">/</span> <span class="dv">100</span>, <span class="co"># Höhe in Meter umrechnen</span></span>
<span id="cb198-3"><a href="tidyverse.html#cb198-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">index =</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">n</span>() <span class="co"># fortlaufende Nummer</span></span>
<span id="cb198-4"><a href="tidyverse.html#cb198-4" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">%&gt;%</span></span>
<span id="cb198-5"><a href="tidyverse.html#cb198-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dim</span>()</span></code></pre></div>
<pre><code>## [1] 87 16</code></pre>
<p>Die Funktion <code>mutate()</code> fügt immer eine neue Variable zu unserem Dataframe hinzu. Alle anderen Variablen bleiben also erhalten. Im Beispiel oben haben wir zum Beispiel zwei Variablen hinzugefügt <code>height_in_meters</code> und <code>index</code> und haben jetzt 16 statt den ursprünglich 14 Variablen. Im Gegensatz dazu entfernt die Funktion <code>transmute()</code> alle Variablen, die nicht explizit als Argumente angegeben werden. Das ist unter anderem hilfreich, wenn wir einen großen externen Datensatz auf für uns relevante Variablen reduzieren wollen und diese zugleich transformieren wollen.</p>
</div>
<div id="variablen-umbennen" class="section level3 hasAnchor" number="8.3.2">
<h3><span class="header-section-number">8.3.2</span> Variablen umbennen<a href="tidyverse.html#variablen-umbennen" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Mit der Funktion <code>dplyr::rename()</code> können wir ganz einfach die Variablen umbenennen, diesem Schema folgend:</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="tidyverse.html#cb200-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span></span>
<span id="cb200-2"><a href="tidyverse.html#cb200-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">neuer_name =</span> alter_name,</span>
<span id="cb200-3"><a href="tidyverse.html#cb200-3" aria-hidden="true" tabindex="-1"></a>         ...)</span></code></pre></div>
<p>Am Beispiel könnte das dann so aussehen:</p>
<div class="sourceCode" id="cb201"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb201-1"><a href="tidyverse.html#cb201-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span></span>
<span id="cb201-2"><a href="tidyverse.html#cb201-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">&quot;height_in_cm&quot;</span> <span class="ot">=</span> <span class="st">&quot;height&quot;</span>,</span>
<span id="cb201-3"><a href="tidyverse.html#cb201-3" aria-hidden="true" tabindex="-1"></a>         <span class="st">&quot;mass_in_kg&quot;</span> <span class="ot">=</span> <span class="st">&quot;mass&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb201-4"><a href="tidyverse.html#cb201-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">names</span>() <span class="co"># Gibt die Namen aller Variablen aus</span></span></code></pre></div>
<pre><code>##  [1] &quot;name&quot;         &quot;height_in_cm&quot; &quot;mass_in_kg&quot;   &quot;hair_color&quot;   &quot;skin_color&quot;   &quot;eye_color&quot;    &quot;birth_year&quot;  
##  [8] &quot;sex&quot;          &quot;gender&quot;       &quot;homeworld&quot;    &quot;species&quot;      &quot;films&quot;        &quot;vehicles&quot;     &quot;starships&quot;</code></pre>
<p>Wie man sehen kann, wurden die Namen <code>"height"</code> und <code>"mass"</code> geändert, in die von uns angegebenen neuen Namen.</p>
</div>
</div>
<div id="fälle-manipulieren" class="section level2 hasAnchor" number="8.4">
<h2><span class="header-section-number">8.4</span> Fälle Manipulieren<a href="tidyverse.html#fälle-manipulieren" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Der Ausgangsdatensatz hat 87 Fälle. Als Nächstes wollen wir diese Fälle nach gewissen Kriterien filtern. Wenn wir zum Beispiel nur Charaktere mit weißen Haaren betrachten wollten, könnten wir die <code>dplyr::filter()</code> Funktion folgendermaßen verwenden:</p>
<div class="sourceCode" id="cb203"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb203-1"><a href="tidyverse.html#cb203-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span></span>
<span id="cb203-2"><a href="tidyverse.html#cb203-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(hair_color <span class="sc">==</span> <span class="st">&quot;white&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 14
##   name      height  mass hair_color skin_color eye_color birth_year sex   gender homeworld species films vehicles
##   &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;   &lt;lis&gt; &lt;list&gt;  
## 1 Yoda          66    17 white      green      brown            896 male  mascu… &lt;NA&gt;      Yoda&#39;s… &lt;chr&gt; &lt;chr&gt;   
## 2 Ki-Adi-M…    198    82 white      pale       yellow            92 male  mascu… Cerea     Cerean  &lt;chr&gt; &lt;chr&gt;   
## 3 Dooku        193    80 white      fair       brown            102 male  mascu… Serenno   Human   &lt;chr&gt; &lt;chr&gt;   
## 4 Jocasta …    167    NA white      fair       blue              NA fema… femin… Coruscant Human   &lt;chr&gt; &lt;chr&gt;   
## # … with 1 more variable: starships &lt;list&gt;</code></pre>
<p>Wie auch in anderen Funktionen, die wir bereits kennengelernt haben, können wir auch logische Konjunktoren verwenden, um bestimmte Bedingungen auszudrücken:</p>
<div class="sourceCode" id="cb205"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb205-1"><a href="tidyverse.html#cb205-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span></span>
<span id="cb205-2"><a href="tidyverse.html#cb205-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(homeworld <span class="sc">==</span> <span class="st">&quot;Tatooine&quot;</span> <span class="sc">&amp;</span> sex <span class="sc">!=</span> <span class="st">&quot;male&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 14
##   name      height  mass hair_color skin_color eye_color birth_year sex   gender homeworld species films vehicles
##   &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;   &lt;lis&gt; &lt;list&gt;  
## 1 C-3PO        167    75 &lt;NA&gt;       gold       yellow           112 none  mascu… Tatooine  Droid   &lt;chr&gt; &lt;chr&gt;   
## 2 Beru Whi…    165    75 brown      light      blue              47 fema… femin… Tatooine  Human   &lt;chr&gt; &lt;chr&gt;   
## 3 R5-D4         97    32 &lt;NA&gt;       white, red red               NA none  mascu… Tatooine  Droid   &lt;chr&gt; &lt;chr&gt;   
## 4 Shmi Sky…    163    NA black      fair       brown             72 fema… femin… Tatooine  Human   &lt;chr&gt; &lt;chr&gt;   
## # … with 1 more variable: starships &lt;list&gt;</code></pre>
<p>Hier zum Beispiel erhalten wir einen Dataframe, der nur die Fälle beinhaltet, welche aus Tatooine stammen und nicht männlich sind.</p>
<p><strong>Achtung!</strong>
<code>filter()</code> behält nur diejenigen Zeilen (Fälle), über welche definitiv gesagt werden kann, dass sie der angegebenen Bedingung entsprechen und somit “wahr” sind. Alle <code>NA</code>-Werte, für welche wir nicht wissen, ob sie wahr wären, werden nicht mit aufgenommen!</p>
<div id="fälle-gruppieren" class="section level3 hasAnchor" number="8.4.1">
<h3><span class="header-section-number">8.4.1</span> Fälle Gruppieren<a href="tidyverse.html#fälle-gruppieren" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Am wohl unscheinbarsten ist die Funktion <code>group_by()</code>, da sie unseren Datensatz oberflächlich betrachtet gar nicht verändert.</p>
<div class="sourceCode" id="cb207"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb207-1"><a href="tidyverse.html#cb207-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span></span>
<span id="cb207-2"><a href="tidyverse.html#cb207-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(homeworld) <span class="sc">%&gt;%</span></span>
<span id="cb207-3"><a href="tidyverse.html#cb207-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>) <span class="co"># nimm die ersten fünf Fälle</span></span></code></pre></div>
<pre><code>## # A tibble: 5 × 14
## # Groups:   homeworld [3]
##   name      height  mass hair_color skin_color eye_color birth_year sex   gender homeworld species films vehicles
##   &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;   &lt;lis&gt; &lt;list&gt;  
## 1 Luke Sky…    172    77 blond      fair       blue            19   male  mascu… Tatooine  Human   &lt;chr&gt; &lt;chr&gt;   
## 2 C-3PO        167    75 &lt;NA&gt;       gold       yellow         112   none  mascu… Tatooine  Droid   &lt;chr&gt; &lt;chr&gt;   
## 3 R2-D2         96    32 &lt;NA&gt;       white, bl… red             33   none  mascu… Naboo     Droid   &lt;chr&gt; &lt;chr&gt;   
## 4 Darth Va…    202   136 none       white      yellow          41.9 male  mascu… Tatooine  Human   &lt;chr&gt; &lt;chr&gt;   
## 5 Leia Org…    150    49 brown      light      brown           19   fema… femin… Alderaan  Human   &lt;chr&gt; &lt;chr&gt;   
## # … with 1 more variable: starships &lt;list&gt;</code></pre>
<p>Im Hintergrund haben wir unseren Tibble aber um das Attribut <code>group</code> ergänzt, welches jeweils die Zeilennummern für die Fälle einer Gruppe als integer Vector speichert.</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb209-1"><a href="tidyverse.html#cb209-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span></span>
<span id="cb209-2"><a href="tidyverse.html#cb209-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(homeworld) <span class="sc">%&gt;%</span></span>
<span id="cb209-3"><a href="tidyverse.html#cb209-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">attr</span>(<span class="st">&quot;group&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb209-4"><a href="tidyverse.html#cb209-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">5</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 2
##   homeworld            .rows
##   &lt;chr&gt;          &lt;list&lt;int&gt;&gt;
## 1 Alderaan               [3]
## 2 Aleen Minor            [1]
## 3 Bespin                 [1]
## 4 Bestine IV             [1]
## 5 Cato Neimoidia         [1]</code></pre>
<p>Durch das nun unserem Datensatz beigefügte Attribut verhalten sich folgende Tidyverse Funktionen teilweise anders. Dies ermöglicht es uns, für die einzelnen Gruppen aggregierte Kennzahlen zu ermitteln:</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="tidyverse.html#cb211-1" aria-hidden="true" tabindex="-1"></a>starwars <span class="sc">%&gt;%</span></span>
<span id="cb211-2"><a href="tidyverse.html#cb211-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(homeworld) <span class="sc">%&gt;%</span> <span class="co"># gruppiere nach homeworld </span></span>
<span id="cb211-3"><a href="tidyverse.html#cb211-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">avg_height =</span> <span class="fu">mean</span>(height, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb211-4"><a href="tidyverse.html#cb211-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">n =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb211-5"><a href="tidyverse.html#cb211-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(n)) <span class="sc">%&gt;%</span> <span class="co"># absteigend sortiert nach Anzahl</span></span>
<span id="cb211-6"><a href="tidyverse.html#cb211-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">3</span>) <span class="co"># nimm die ersten drei Fälle</span></span></code></pre></div>
<pre><code>## # A tibble: 3 × 3
##   homeworld avg_height     n
##   &lt;chr&gt;          &lt;dbl&gt; &lt;int&gt;
## 1 Naboo           175.    11
## 2 Tatooine        170.    10
## 3 &lt;NA&gt;            139.    10</code></pre>
<p>Die hier verwendete Funktion <code>summarise()</code> oder <code>summarize()</code> erlaubt es uns nun Gruppeneigenschaften zu ermitteln. Analog zu <code>mutate()</code> können wir so Spalten zu den resultierenden Dataframe hinzufügen. Auf dem <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/main/data-transformation.pdf">dplyr:: Cheatsheet</a> findet ihr auf der zweiten Seite unter “Summary Functions” ein paar Funktionen, welche ihr auf die jeweiligen Gruppen anwenden könnt. Im Beispiel haben wir <code>mean()</code> benutzt, um das durchschnittliche Gewicht der Gruppe zu ermitteln; <code>n()</code> hingegen gibt die Anzahl an Fällen in der Gruppe aus. Zu beachten gilt es, dass alle unbestimmten Werte (<code>NA</code>) zu einer Gruppe zusammengefasst wurden.</p>
<p>Mit <code>ungroup()</code> kann man das Gruppenattribut wieder entfernen.</p>
<p>Man sollte sich immer vergegenwärtigen, an welchem Punkt man Analysen auf Gruppenebene oder auf Individualebene macht, bzw. ob man mit einem Gruppierten Tibble arbeitet oder nicht.</p>
</div>
</div>
<div id="prüfe-dich-selbst-4" class="section level2 hasAnchor" number="8.5">
<h2><span class="header-section-number">8.5</span> Prüfe dich selbst<a href="tidyverse.html#prüfe-dich-selbst-4" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Von dieser Sitzung solltest du Folgendes mitgenommen haben:</p>
<ul class="task-list">
<li><input type="checkbox" disabled="" checked="" />
Du solltest wissen, was das Tidyverse ist.</li>
<li><input type="checkbox" disabled="" checked="" />
Du solltest wissen, was “tidy-data” auszeichnet. (siehe 8.2)</li>
<li><input type="checkbox" disabled="" checked="" />
Du solltest unterscheiden können, mit welchen Funktionen man Fälle und mit welchen man Variablen manipuliert.</li>
<li><input type="checkbox" disabled="" checked="" />
Du solltest verstanden haben, was die Funktion <code>group_by()</code> macht und wann diese nützlich sein könnte.</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="dateimanagement.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="kontrollstrukturen.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/peer-schwertfeger/handout_r_kurs/edit/master/08-tidyverse.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/peer-schwertfeger/handout_r_kurs/blob/master/08-tidyverse.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
